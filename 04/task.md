 courses:b0b99prpa:hw:hw04 \[CourseWare Wiki\]                 /\*<!\[CDATA\[\*/var NS='courses:b0b99prpa:hw';var JSINFO = {"isadmin":0,"isauth":0,"plugin\_folded":{"hide":"hide","reveal":"reveal"},"move\_renameokay":false,"move\_allowrename":false,"id":"courses:b0b99prpa:hw:hw04","namespace":"courses:b0b99prpa:hw","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0}; /\*!\]\]>\*/ /\*<!\[CDATA\[\*/MathJax.Hub.Config({ tex2jax: { inlineMath: \[ \["$","$"\], \["\\\\(","\\\\)"\] \], displayMath: \[ \["$$","$$"\], \["\\\\\[","\\\\\]"\] \], processEscapes: true }, TeX: { equationNumbers: {autoNumber: "AMS"} } }); /\*!\]\]>\*/   

  [![Logo CVUT](/wiki/lib/tpl/bulma-cw/images/symbol_cvut_plna_doplnkova_verze_negativ.svg) ![Logo FEL](/wiki/lib/tpl/bulma-cw/images/logo_FEL_zkratka_negativ.svg) CourseWare Wiki](/wiki/start "[H]")

Switch Term

[Winter 2024 / 2025](/wiki/courses/b0b99prpa/start)[Winter 2023 / 2024](/b231/courses/b0b99prpa/start)[Winter 2022 / 2023](/b221/courses/b0b99prpa/start)[Winter 2021 / 2022](/b211/courses/b0b99prpa/start)[Winter 2020 / 2021](/b201/courses/b0b99prpa/start)[Winter 2019 / 2020](/b191/courses/b0b99prpa/start)[Winter 2018 / 2019](/b181/courses/b0b99prpa/start)

Search

[Log In](/wiki/courses/b0b99prpa/hw/hw04?do=login&sectok= "Log In")

*   [](/wiki/start "start")
*   [b241](/wiki/start "wiki")
*   [courses](/wiki/courses/start "courses:start")
*   [b0b99prpa](/wiki/courses/b0b99prpa/start "courses:b0b99prpa:start")
*   [hw](/wiki/courses/b0b99prpa/hw/start "courses:b0b99prpa:hw:start")
*   [hw04](/wiki/courses/b0b99prpa/hw/hw04 "courses:b0b99prpa:hw:hw04")

Navigation

*   [B0B99PRPA](/wiki/courses/b0b99prpa/start)
*   [Domácí úkoly](/wiki/courses/b0b99prpa/hw/start)
    *   [HW 01 - První program](/wiki/courses/b0b99prpa/hw/hw01)
    *   [HW 02 a,b - Vstup, výpočet a výstup](/wiki/courses/b0b99prpa/hw/hw02)
    *   [HW 03 a,b - První cyklus](/wiki/courses/b0b99prpa/hw/hw03)
    *   [HW 04 - RLE kodér](/wiki/courses/b0b99prpa/hw/hw04)
    *   [HW 05 - Kreslení (ASCII art)](/wiki/courses/b0b99prpa/hw/hw05)
    *   [HW 06 - Caesarova šifra](/wiki/courses/b0b99prpa/hw/hw06)
    *   [HW 07 - Maticové počty](/wiki/courses/b0b99prpa/hw/hw07)
    *   [HW 08 - Zpracování číselné řady](/wiki/courses/b0b99prpa/hw/hw08)
    *   [HW 09 - Analýza textu](/wiki/courses/b0b99prpa/hw/hw09)
    *   [HW 10 - Kruhová fronta v poli](/wiki/courses/b0b99prpa/hw/hw10)
    *   [HW 11 - Zpracování strukturovaného textu](/wiki/courses/b0b99prpa/hw/hw11)
*   [Cvičení](/wiki/courses/b0b99prpa/labs/start)
    *   [1 - Úvodní cvičení](/wiki/courses/b0b99prpa/labs/lab01)
    *   [2 - Vstup a výstup programu](/wiki/courses/b0b99prpa/labs/lab02)
    *   [3 - Větvení programu, funkce](/wiki/courses/b0b99prpa/labs/lab03)
    *   [4 - Cykly](/wiki/courses/b0b99prpa/labs/lab04)
    *   [5 - Vnořené cykly](/wiki/courses/b0b99prpa/labs/lab05)
    *   [6 - Strukturované datové typy](/wiki/courses/b0b99prpa/labs/lab06)
    *   [7 - Funkce, ukazatele, pole](/wiki/courses/b0b99prpa/labs/lab07)
    *   [8 - Dynamicky alokovaná pole](/wiki/courses/b0b99prpa/labs/lab08)
    *   [9 - Textové řetězce](/wiki/courses/b0b99prpa/labs/lab09)
    *   [10 - Spojové seznamy, fronta, zásobník](/wiki/courses/b0b99prpa/labs/lab10)
    *   [11 - Struktury, práce se soubory](/wiki/courses/b0b99prpa/labs/lab11)
    *   [12 - TBD](/wiki/courses/b0b99prpa/labs/lab12)
    *   [13 - Konzultační cvičení](/wiki/courses/b0b99prpa/labs/lab13)
*   [Řešené příklady](/wiki/courses/b0b99prpa/solutions/start)
    *   [2 - Standardní vstup a výstup](/wiki/courses/b0b99prpa/solutions/lab02)
    *   [3 - Větvení, funkce](/wiki/courses/b0b99prpa/solutions/lab03)
    *   [4 - Cykly](/wiki/courses/b0b99prpa/solutions/lab04)
    *   [5 - Strukturované datové typy](/wiki/courses/b0b99prpa/solutions/lab05)
    *   [6 - Funkce, ukazatele, pole](/wiki/courses/b0b99prpa/solutions/lab06)
    *   [6a - Ukazatele a jejich význam](/wiki/courses/b0b99prpa/solutions/lab06a)
    *   [7 - Dynamicky alokované pole 1/2](/wiki/courses/b0b99prpa/solutions/lab07)
    *   [8 - Textové řetězce 1/2](/wiki/courses/b0b99prpa/solutions/lab08)
    *   [9 - Dynamicky alokované pole 2/2](/wiki/courses/b0b99prpa/solutions/lab09)
    *   [10\. Textové řetězce 2/2](/wiki/courses/b0b99prpa/solutions/lab10)
    *   [11\. Práce se soubory](/wiki/courses/b0b99prpa/solutions/lab11)
    *   [12\. Heterogenní seznam](/wiki/courses/b0b99prpa/solutions/lab12)
    *   [13 - ADT - zásobník](/wiki/courses/b0b99prpa/solutions/lab13)
    *   [14 - Spojové seznamy](/wiki/courses/b0b99prpa/solutions/lab14)
*   [Návody](/wiki/courses/b0b99prpa/tutorials/start)
    *   [Základní příkazy příkazové řádky](/wiki/courses/b0b99prpa/tutorials/basiccommands)
    *   [Základní řídicí struktury](/wiki/courses/b0b99prpa/tutorials/control)
    *   [Informace o počítačové učebně](/wiki/courses/b0b99prpa/tutorials/lab)
    *   [Hesla v počítačové síti ČVUT a FEL](/wiki/courses/b0b99prpa/tutorials/password)
    *   [Přehled služeb studentům FEL](/wiki/courses/b0b99prpa/tutorials/services)
    *   [Tipy a triky](/wiki/courses/b0b99prpa/tutorials/tipy_triky)
    *   [Instalace potřebných balíčků](/wiki/courses/b0b99prpa/tutorials/ubuntu_packages)
    *   [Instalace Ubuntu na Windows 10/11 + WSL](/wiki/courses/b0b99prpa/tutorials/ubuntuwin11)
    *   [Instalace VirtualBoxu a Ubuntu (old)](/wiki/courses/b0b99prpa/tutorials/virtualboxinstallation)
    *   [VS Code - instalace Linux](/wiki/courses/b0b99prpa/tutorials/vs_code_linux)
    *   [VS Code - tipy pro práci](/wiki/courses/b0b99prpa/tutorials/vs_code_tips)
    *   [VS Code - instalace Windows](/wiki/courses/b0b99prpa/tutorials/vs_code_win)
*   [Slovníček pojmů](/wiki/courses/b0b99prpa/dictionary)
*   [Často kladené dotazy a problémy](/wiki/courses/b0b99prpa/faq)
*   [Implementační test 23.01.2024](/wiki/courses/b0b99prpa/implementace)
*   [Přednášky](/wiki/courses/b0b99prpa/lectures)
*   [Otázky pro testy](/wiki/courses/b0b99prpa/test)

All courses

*   [Winter 2024 / 2025](/wiki/courses/start)
*   [Summer 2023 / 2024](/b232/courses/start)
*   [Winter 2023 / 2024](/b231/courses/start)
*   [Summer 2022 / 2023](/b222/courses/start)
*   [Winter 2022 / 2023](/b221/courses/start)
*   [Summer 2021 / 2022](/b212/courses/start)
*   [Winter 2021 / 2022](/b211/courses/start)
*   [Summer 2020 / 2021](/b202/courses/start)
*   [Winter 2020 / 2021](/b201/courses/start)
*   [Summer 2019 / 2020](/b192/courses/start)
*   [Winter 2019 / 2020](/b191/courses/start)
*   [Summer 2018 / 2019](/b182/courses/start)
*   [Winter 2018 / 2019](/b181/courses/start)
*   [Summer 2017 / 2018](/b172/courses/start)
*   [Older](/old/courses/start)

- - -

# B0B99PRP - Procedurální programování pro EK/EEM

### Table of Contents

*   [HW 04 - RLE kodér](#hw_04_-_rle_koder)
    
    *   [RLE kódování](#rle_kodovani)
        
        *   [Implementace](#implementace)
            
*   [Povinné zadání](#povinne_zadani)
    
    *   *   [Příklad 1 - pub01](#priklad_1_-_pub01)
            
        *   [Příklad 2 - pub02](#priklad_2_-_pub02)
            
        *   [Příklad 3 - pub03](#priklad_3_-_pub03)
            
        *   [Příklad 4 - pub04](#priklad_4_-_pub04)
            
*   [Odevzdání](#odevzdani)
    

# HW 04 - RLE kodér

|     |     |
| --- | --- |
| Termín odevzdání | 10.11.2024 7:00 |
| Bodový zisk | 5b  |
| Počet uploadů | 15  |
| Typ zadání | povinné |

Tato úloha slouží k procvičení cyklů a podmínek, není třeba používat pole (řešení bez použití pole je preferováno).

## RLE kódování

RLE (run-length encoding) je bezeztrátová komprese, která kóduje vstupní data tak, že kóduje posloupnosti stejných hodnot do dvojic (délka posloupnosti, hodnota). Účinnost komprese je silně závislá na charakteru vstupních dat, která musí obsahovat delší sekvence stejných znaků, jinak výrazně účinnost komprese klesá.

Příklad vstupních dat kodéru RLE:

WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWBWWWWWWWWWWWWWW

Výsledek kódování RLE (není výstupem programu řešícího HW04, pouze demonstrační):

W12B1W12B3W24B1W14

### Implementace

Nejčastější implementace je komprese bytového proudu. Implementuje se pomocí dvojic bytů, jeden byte udává hodnotu kódovaného bytu (symbol), druhý byte určuje počet opakování. Nevýhoda je, že pro jeden neopakující se symbol v proudu bytů se kóduje tato hodnota pomocí dvojice bytů, proto pro nevhodná vstupní data může být komprese neúčinná a velikost proudu z výstupu kóderu RLE až dvojnásobná oproti vstupu. Proto pro naší implementaci zvolíme následující pravidla:

a) kódování neopakujícího se symbolu

A ⇒ A

b) kódování symbolů s jedním opakováním

AA ⇒ AA

c) kódování sekvence 3 - 255 stejných symbolů

AAA ⇒ A3

d) pro sekvence delší než 255 stejných symbolů proběhne kódování 'nadvakrát'. Následující příklad je zkáceným zápisem zakódování 257 znaků 'A'

A..A ⇒ A255AA

Aby bylo kódování efektivní, mělo by probíhat v binárním režimu, takže místo ASCII číslic se budou do výstupního proudu zapisovat přímo hodnoty bytů. Pak je třeba ověřit správnost výsledku v editoru, který umí zobrazit binární podobu souboru. Následující příklad ukazuje zakódování 66 opakování symbolu `A` (pro připomenutí, znak `B` má číselnou podobu v ASCII tabulce 66):

$ cat file.in
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
$ ./hw04 < file.in > file.out
$ cat file.out
AB
$ hexdump -C file.out
00000000  41 42 0a                                          |AB.|
00000003

V rámci tohoto domácího úkolu budeme místo binárního vyjádření počtu opakování používat dekadické číslice v ASCII kódování; bude jednodušší vizuální i automatická kontrola. Při výpočtu kompresního poměru pak ale bude třeba počítat s tím, že čísla větší než 9 jsou reprezentovány dvěma a více byty v ASCII kódování.

# Povinné zadání

*   Program ze standardního vstupu načte symboly, které se mají kódovat.
    
*   Kódují se symboly, které patří do množiny velkých písmen ('A' - 'Z').
    
*   Kódování se řídí pravidly popsanými v sekci Implementace.
    
*   Pokud se na vstupu objeví symbol, který nepatří do této množiny, vypíše program na standardní chybový výstup zprávu: “`Error: Neplatny symbol!\n`” a program ukončete s návratovou hodnotou `100`. Viz Příklad 4. Běh programu je v tomto případě okamžitě ukončen a výstupní soubor není ukončen znakem `0x0A`.
    
*   Pokud se podaří zakódovat všechny vstupní symboly, vypíše se na standardní výstup zakódovaná sekvence a na standardní chybový výstup se vypíše dosažený kompresní poměr. Viz Příklad 1.
    
*   Vstupní ~i výstupní soubor~ jsou ukončeny znakem `0x0A`, který se při výpočtu kompresního poměru nezapočítává.
    

Pro zobrazení šestnáctkového výstupu je použit následující příkaz:

$ hexdump -v -e '1/1 "%02X "' pub01.out

### Příklad 1 - pub01

| Vstupní hodnoty (stdin) | Výstup (stdout) | Chybový výstup (stderr) | Návratová hodnota |
| --- | --- | --- | --- |
| BWWBBBWWWWWWWBBBBBBBWWWBBBWWWWBBBWWWWWWBBBBBBBBBWWWWWWBBBBBB | BWWB3W7B7W3B3W4B3W6B9W6B6 | Pocet vstupnich symbolu: 60<br>Pocet zakodovanych symbolu: 25<br>Kompresni pomer: 0.42 | 0   |

### Příklad 2 - pub02

| Vstupní hodnoty (stdin) | Výstup (stdout) | Chybový výstup (stderr) | Návratová hodnota |
| --- | --- | --- | --- |
| ABC | ABC | Pocet vstupnich symbolu: 3<br>Pocet zakodovanych symbolu: 3<br>Kompresni pomer: 1.00 | 0   |

### Příklad 3 - pub03

| Vstupní hodnoty (stdin) | Výstup (stdout hex) | Chybový výstup (stderr) | Návratová hodnota |
| --- | --- | --- | --- |
| AABTTT | AABT3 | Pocet vstupnich symbolu: 6<br>Pocet zakodovanych symbolu: 5<br>Kompresni pomer: 0.83 | 0   |

### Příklad 4 - pub04

| Vstupní hodnoty (stdin) | Výstup (stdout) | Chybový výstup (stderr) | Návratová hodnota |
| --- | --- | --- | --- |
| ABBbdfbYYYY | ABB | Error: Neplatny symbol! | 100 |

# Odevzdání

Veřejné příklady + Makefile: [hw04\_-\_rle.zip](/wiki/_media/courses/b0b99prpa/hw/hw04_-_rle.zip "courses:b0b99prpa:hw:hw04_-_rle.zip (5 KB)")

|     | Povinné zadání |
| --- | --- |
| Název v BRUTE | HW04 |
| Odevzdávané soubory | main.c |
| Argumenty při spuštění | žádné |
| Kompilace pomocí | clang -Wno-error=gnu-case-range -pedantic -Wall -Werror -std=c99 -O3 |
| Procvičované oblasti | cykly a podmínky |

courses/b0b99prpa/hw/hw04.txt · Last modified: 2024/09/18 15:22 by nentvond

Copyright © 2024 CTU in Prague | Operated by [IT Center](https://svti.fel.cvut.cz/) of [Faculty of Electrical Engineering](https://fel.cvut.cz/) | Bug reports and suggestions [Helpdesk CTU](https://helpdesk.cvut.cz/secure/CreateIssueDetails!init.jspa?pid=14162&issuetype=1&components=15002&priority=3)

![](/wiki/lib/exe/indexer.php?id=courses%3Ab0b99prpa%3Ahw%3Ahw04&1730822581)